{
	"name": "JackboxTemplateEvents",
	"events": [
		{
			"eventType": "variable",
			"name": "MAX_PEERS_PER_LOBBY",
			"type": "number",
			"initialValue": "0",
			"comment": "Maximum number of peers per lobby (including host). Set 0 for unlimited.",
			"isStatic": false,
			"isConstant": true,
			"sid": 319942795830060
		},
		{
			"eventType": "variable",
			"name": "NUM_ROOM_CODE_CHARACTERS",
			"type": "number",
			"initialValue": "4",
			"comment": "Number of characters in room code. Limited to 3 or 4 (for profanity checks).",
			"isStatic": false,
			"isConstant": true,
			"sid": 485850238574904
		},
		{
			"eventType": "comment",
			"text": "WARNING: No need to edit anything beyond this point unless you are interested in changing advanced multiplayer functionality or data storage. Edit at your own risk!"
		},
		{
			"eventType": "variable",
			"name": "GAME_NAME",
			"type": "string",
			"initialValue": "EthicalRTDGame-UWUNT",
			"comment": "Game name used for multiplayer. This must be globally unique, so use a prefix like \"UWUNTEthicalGames-\" plus project name.",
			"isStatic": false,
			"isConstant": true,
			"sid": 484765507368982
		},
		{
			"eventType": "variable",
			"name": "GAME_INSTANCE_NAME",
			"type": "string",
			"initialValue": "default",
			"comment": "Game instance name used for multiplayer. Can often be left as \"default\".",
			"isStatic": false,
			"isConstant": true,
			"sid": 669882084292497
		},
		{
			"eventType": "variable",
			"name": "NUM_PLAYERS",
			"type": "number",
			"initialValue": "0",
			"comment": "Number of non-host players in multiplayer.",
			"isStatic": false,
			"isConstant": false,
			"sid": 635380613465508
		},
		{
			"eventType": "variable",
			"name": "ROOM_CODE",
			"type": "string",
			"initialValue": "",
			"comment": "Room code used for multiplayer.",
			"isStatic": false,
			"isConstant": false,
			"sid": 869700854461223
		},
		{
			"eventType": "variable",
			"name": "REQUEST_TAG",
			"type": "string",
			"initialValue": "",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 232344383305305
		},
		{
			"eventType": "variable",
			"name": "REQUEST_FROM_ALIAS",
			"type": "string",
			"initialValue": "",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 765201002486371
		},
		{
			"eventType": "variable",
			"name": "RECEIVE_DATA_HANDLER",
			"type": "string",
			"initialValue": "",
			"comment": "Method name for receiving data",
			"isStatic": false,
			"isConstant": false,
			"sid": 581104828213138
		},
		{
			"eventType": "variable",
			"name": "RECEIVE_REQUEST_HANDLER",
			"type": "string",
			"initialValue": "",
			"comment": "Method name for receiving request",
			"isStatic": false,
			"isConstant": false,
			"sid": 946819222928264
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Initialization",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "InitializeGame",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-array",
							"objectClass": "GameDataJSON",
							"sid": 632283869886362,
							"parameters": {
								"path": "\"playerList\"",
								"size": "0"
							}
						},
						{
							"id": "set-object",
							"objectClass": "GameDataJSON",
							"sid": 380760402829767,
							"parameters": {
								"path": "\"players\""
							}
						},
						{
							"id": "set-object",
							"objectClass": "GameDataJSON",
							"sid": 807944928020389,
							"parameters": {
								"path": "\"roles\""
							}
						},
						{
							"id": "set-object",
							"objectClass": "GameDataJSON",
							"sid": 606987863553066,
							"parameters": {
								"path": "\"outstandingRequests\""
							}
						},
						{
							"id": "set-object",
							"objectClass": "GameDataJSON",
							"sid": 755824020824681,
							"parameters": {
								"path": "\"receivedData\""
							}
						},
						{
							"id": "set-object",
							"objectClass": "GameDataJSON",
							"sid": 563057997006438,
							"parameters": {
								"path": "\"receivedRequests\""
							}
						},
						{
							"id": "map-function-default",
							"objectClass": "Functions",
							"sid": 807943992378038,
							"parameters": {
								"name": "\"OnReceiveDataFunctions\"",
								"function": "ORD_default"
							}
						},
						{
							"id": "map-function-default",
							"objectClass": "Functions",
							"sid": 773444247706765,
							"parameters": {
								"name": "\"OnReceiveRequestFunctions\"",
								"function": "ORR_default"
							}
						}
					],
					"sid": 390091361054469
				}
			],
			"sid": 506139072307747
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Networking",
			"description": "Functionality for multiplayer networking.",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "CompareRoomCodeToExistingRooms",
					"functionDescription": "Compares proposed room code to existing rooms in multiplayer game and instance. Must have successfully connected, logged in, and requested multiplayer room list.",
					"functionCategory": "Networking",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "proposed_room_code",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 585497113223024
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Compares proposed room code to existing rooms in multiplayer game and instance. Must have successfully connected, logged in, and requested multiplayer room list."
						}
					],
					"sid": 768757510271868,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "Defaults to 0 if room code does not match existing room codes"
								},
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 910314207081937,
									"parameters": {
										"value": "0"
									}
								}
							],
							"sid": 264152061911252
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 254624759445429,
									"parameters": {
										"name": "\"rooms-loop\"",
										"start-index": "0",
										"end-index": "Multiplayer.ListRoomCount - 1"
									}
								}
							],
							"actions": [],
							"sid": 223151471589597,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 580722273666017,
											"parameters": {
												"variable": "proposed_room_code",
												"comparison": 0,
												"value": "Multiplayer.ListRoomName(loopindex)"
											}
										}
									],
									"actions": [
										{
											"id": "set-function-return-value",
											"objectClass": "Functions",
											"sid": 992005753918196,
											"parameters": {
												"value": "-1"
											}
										}
									],
									"sid": 732327226730872
								}
							]
						}
					]
				},
				{
					"functionName": "GenerateUniqueRoomCode",
					"functionDescription": "Generates room code, compares to existing, and populates into ROOM_CODE global variable with room code",
					"functionCategory": "Networking",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Generates room code until unique and populates into ROOM_CODE global variable."
						},
						{
							"type": "script",
							"script": "generateUniqueRandomRoomCode(runtime, runtime.globalVars.NUM_ROOM_CODE_CHARACTERS);"
						}
					],
					"sid": 701659713971047
				},
				{
					"functionName": "InitializeMultiplayer",
					"functionDescription": "Connects to server, logs in, and starts new multiplayer room with random room code.",
					"functionCategory": "Networking",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": true,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 833330283353146,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "supports-multiplayer",
									"objectClass": "Multiplayer",
									"sid": 812495455187376
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "console.log(\"Connecting to server...\")"
								},
								{
									"id": "connect",
									"objectClass": "Multiplayer",
									"sid": 371420748409687,
									"parameters": {
										"server": "\"wss://multiplayer.scirra.com\""
									}
								},
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 504229937156157,
									"parameters": {
										"tag": "\"multiplayer_initialized\""
									}
								}
							],
							"sid": 288866195236155
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 865722980375463
								}
							],
							"actions": [
								{
									"id": "go-to-layout",
									"objectClass": "System",
									"sid": 542557592478409,
									"parameters": {
										"layout": "ErrorMenu"
									}
								},
								{
									"id": "set-text",
									"objectClass": "ErrorText",
									"sid": 259140856308308,
									"parameters": {
										"text": "\"Your device does not support multiplayer. Please use another device.\""
									}
								}
							],
							"sid": 378146657205346
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-connected",
							"objectClass": "Multiplayer",
							"sid": 307603877122797
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "console.log(\"Connected, logging into server...\")"
						},
						{
							"id": "log-in",
							"objectClass": "Multiplayer",
							"sid": 694998090198656,
							"parameters": {
								"alias": "\"game-host\""
							}
						}
					],
					"sid": 673334336689779
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-logged-in",
							"objectClass": "Multiplayer",
							"sid": 931262417279391
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "console.log(\"Logged in, finding unique room code...\");"
						},
						{
							"callFunction": "GenerateUniqueRoomCode",
							"sid": 462368705179122
						},
						{
							"id": "join-room",
							"objectClass": "Multiplayer",
							"sid": 398927877003120,
							"parameters": {
								"game": "GAME_NAME",
								"instance": "GAME_INSTANCE_NAME",
								"room": "ROOM_CODE",
								"max-peers": "MAX_PEERS_PER_LOBBY"
							}
						}
					],
					"sid": 826268305631335
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-joined-room",
							"objectClass": "Multiplayer",
							"sid": 364353063842830
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "console.log(\"Joined room \" + runtime.globalVars.ROOM_CODE + \", ready for peers.\")"
						},
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 417047790267131,
							"parameters": {
								"tag": "\"multiplayer_initialized\""
							}
						},
						{
							"id": "parse",
							"objectClass": "MessagingJSON",
							"sid": 947151592028231,
							"parameters": {
								"data": "\"{\"\"playerIdx\"\": \"&GameDataJSON.ArraySize(\"playerList\")&\", \"\"ID\"\": \"\"\"&Multiplayer.PeerID&\"\"\"}\""
							}
						}
					],
					"sid": 649121793901918
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-error",
							"objectClass": "Multiplayer",
							"sid": 106289462868174
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "console.log(\"Multiplayer networking error.\")"
						},
						{
							"id": "go-to-layout",
							"objectClass": "System",
							"sid": 568680554506539,
							"parameters": {
								"layout": "ErrorMenu"
							}
						},
						{
							"id": "set-text",
							"objectClass": "ErrorText",
							"sid": 526937197922740,
							"parameters": {
								"text": "\"Server recieved an error message: \"&newline&Multiplayer.ErrorMessage"
							}
						}
					],
					"sid": 254360972392307
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-peer-connected",
							"objectClass": "Multiplayer",
							"sid": 653970198957839
						}
					],
					"actions": [
						{
							"id": "push-value",
							"objectClass": "GameDataJSON",
							"sid": 352500844886591,
							"parameters": {
								"where": "back",
								"path": "\"playerList\"",
								"value": "Multiplayer.PeerAlias"
							}
						},
						{
							"id": "set-json",
							"objectClass": "GameDataJSON",
							"sid": 265140245774574,
							"parameters": {
								"path": "\"players.\"&Multiplayer.PeerAlias",
								"json": "\"{\"\"playerIdx\"\": \"&GameDataJSON.ArraySize(\"playerList\")&\", \"\"ID\"\": \"\"\"&Multiplayer.PeerID&\"\"\"}\""
							}
						},
						{
							"callFunction": "SetAndSendPlayerRole",
							"sid": 839348307661525,
							"parameters": [
								"Multiplayer.PeerAlias"
							]
						},
						{
							"callFunction": "SendRequestToSpecificPeer",
							"sid": 765057472680598,
							"parameters": [
								"\"__connection_data\"",
								"Multiplayer.PeerAlias"
							]
						},
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 145370384518546,
							"parameters": {
								"variable": "NUM_PLAYERS",
								"value": "1"
							}
						},
						{
							"callFunction": "RefreshPlayerListDisplay",
							"sid": 710490765621076
						}
					],
					"sid": 244076657012184,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [],
							"sid": 924181529243962
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-peer-message",
							"objectClass": "Multiplayer",
							"sid": 618264613722904
						}
					],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 741391602769541,
							"parameters": {
								"type": "log",
								"message": "\"Received message (tag=\"&Multiplayer.Tag&\", message=\"&Multiplayer.Message&\") from alias=\"&Multiplayer.FromAlias"
							}
						}
					],
					"sid": 453551208877273,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 949778837956578,
									"parameters": {
										"first-value": "Multiplayer.Tag",
										"comparison": 0,
										"second-value": "\"__request_data\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "OnReceiveRequest",
									"sid": 869889667056361,
									"parameters": [
										"Multiplayer.Message",
										"Multiplayer.FromAlias"
									]
								}
							],
							"sid": 128088975093203
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 895346737092632
								}
							],
							"actions": [
								{
									"callFunction": "OnReceiveData",
									"sid": 304407768390534,
									"parameters": [
										"Multiplayer.Tag",
										"Multiplayer.Message",
										"Multiplayer.FromAlias"
									]
								}
							],
							"sid": 596422096158869
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-peer-disconnected",
							"objectClass": "Multiplayer",
							"sid": 487655256293484
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "TODO: Pull PlayerList from GameDataJSON.players, making sure to refresh when peer disconnected."
						},
						{
							"id": "subtract-from-eventvar",
							"objectClass": "System",
							"sid": 829009747088482,
							"parameters": {
								"variable": "NUM_PLAYERS",
								"value": "1"
							}
						},
						{
							"callFunction": "RefreshPlayerListDisplay",
							"sid": 620875521030553
						}
					],
					"sid": 889207322330953
				},
				{
					"functionName": "SendRequestToAllPeers",
					"functionDescription": "Send a request for data from peers with optional tracking.",
					"functionCategory": "Networking",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "type",
							"type": "string",
							"initialValue": "",
							"comment": "Tag for request, should be unique by data type",
							"sid": 769922672624746
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Sends a data request message to all peers.\nNOTE: Sends a message with fixed tag and \"requested_tag\" is the message. This is a little confusing. This will reset outstanding requests for specific tag even if existing requests remain."
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 791650645326890,
							"parameters": {
								"type": "log",
								"message": "\"Sending message (tag=__request_data, message=\"&type&\") to all\""
							}
						},
						{
							"id": "broadcast-message",
							"objectClass": "Multiplayer",
							"sid": 451924655593140,
							"parameters": {
								"from-id": "\"\"",
								"tag": "\"__request_data\"",
								"message": "type",
								"mode": "reliable-unordered"
							}
						},
						{
							"id": "set-array",
							"objectClass": "GameDataJSON",
							"sid": 860534083416342,
							"parameters": {
								"path": "\"outstandingRequests.\"&type",
								"size": "0"
							}
						}
					],
					"sid": 400679382257346,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "GameDataJSON",
									"sid": 671865021547628,
									"parameters": {
										"path": "\"playerList\""
									}
								}
							],
							"actions": [
								{
									"id": "push-value",
									"objectClass": "GameDataJSON",
									"sid": 280282614031504,
									"parameters": {
										"where": "back",
										"path": "\"outstandingRequests.\"&type",
										"value": "GameDataJSON.CurrentValue"
									}
								},
								{
									"callFunction": "OnSendRequest",
									"sid": 493394653244809,
									"parameters": [
										"type",
										"GameDataJSON.CurrentValue"
									]
								}
							],
							"sid": 675143392543190
						}
					]
				},
				{
					"functionName": "SendRequestToSpecificPeer",
					"functionDescription": "Send a request for data from peers with optional tracking.",
					"functionCategory": "Networking",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "type",
							"type": "string",
							"initialValue": "",
							"comment": "Tag for request, should be unique by data type",
							"sid": 966786778691690
						},
						{
							"name": "to_alias",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 144885521187146
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Sends a data request message to specified peers.\nNOTE: Sends a message with fixed tag and \"requested_tag\" is the message. This is a little confusing."
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 165095396296033,
							"parameters": {
								"type": "log",
								"message": "\"Sending message (tag=__request_data, message=\"&type&\") to \"&to_alias"
							}
						},
						{
							"id": "send-message",
							"objectClass": "Multiplayer",
							"sid": 318753462192192,
							"parameters": {
								"peer-id": "GameDataJSON.Get(\"players.\"&to_alias&\".ID\")",
								"tag": "\"__request_data\"",
								"message": "type",
								"mode": "reliable-unordered"
							}
						}
					],
					"sid": 564502386467467,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-key",
									"objectClass": "GameDataJSON",
									"sid": 657702765431911,
									"parameters": {
										"path": "\"outstandingRequests.\"&type"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-array",
									"objectClass": "GameDataJSON",
									"sid": 985728660959927,
									"parameters": {
										"path": "\"outstandingRequests.\"&type",
										"size": "0"
									}
								}
							],
							"sid": 777636432298997
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "push-value",
									"objectClass": "GameDataJSON",
									"sid": 676889382448654,
									"parameters": {
										"where": "back",
										"path": "\"outstandingRequests.\"&type",
										"value": "to_alias"
									}
								},
								{
									"callFunction": "OnSendRequest",
									"sid": 369482767017729,
									"parameters": [
										"type",
										"to_alias"
									]
								}
							],
							"sid": 267190815755723
						}
					]
				},
				{
					"functionName": "SendRequestToPeersWithRole",
					"functionDescription": "Send a request for data from peers with optional tracking.",
					"functionCategory": "Networking",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "type",
							"type": "string",
							"initialValue": "",
							"comment": "Tag for request, should be unique by data type",
							"sid": 513227518615924
						},
						{
							"name": "to_role",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 366056351295117
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Sends a data request message to specified peers.\nNOTE: Roles are assumed to be strings (can't be complex objects due to \"CurrentValue\" attribute). Sends a message with fixed tag and \"requested_tag\" is the message. This is a little confusing."
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 618222050134318,
							"parameters": {
								"type": "log",
								"message": "\"Sending message (tag=__request_data, message=\"&type&\") to peers with role=\"&to_role"
							}
						}
					],
					"sid": 148684009826010,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-key",
									"objectClass": "GameDataJSON",
									"sid": 457272413335343,
									"parameters": {
										"path": "\"outstandingRequests.\"&type"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-array",
									"objectClass": "GameDataJSON",
									"sid": 111707279233070,
									"parameters": {
										"path": "\"outstandingRequests.\"&type",
										"size": "0"
									}
								}
							],
							"sid": 399036909265950
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "GameDataJSON",
									"sid": 418775889550822,
									"parameters": {
										"path": "\"roles.\"&to_role"
									}
								}
							],
							"actions": [
								{
									"id": "send-message",
									"objectClass": "Multiplayer",
									"sid": 369034963128260,
									"parameters": {
										"peer-id": "GameDataJSON.Get(\"players.\"&GameDataJSON.CurrentValue&\".ID\")",
										"tag": "\"__request_data\"",
										"message": "type",
										"mode": "reliable-unordered"
									}
								}
							],
							"sid": 172845058773299,
							"children": [
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "push-value",
											"objectClass": "GameDataJSON",
											"sid": 351719740782314,
											"parameters": {
												"where": "back",
												"path": "\"outstandingRequests.\"&type",
												"value": "GameDataJSON.CurrentValue"
											}
										},
										{
											"callFunction": "OnSendRequest",
											"sid": 922005515903125,
											"parameters": [
												"type",
												"\"\""
											]
										}
									],
									"sid": 540445223142928
								}
							]
						}
					]
				},
				{
					"functionName": "SendDataToAllPeers",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "type",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 656084617470502
						},
						{
							"name": "message",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 483790213626403
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 624602885758022,
							"parameters": {
								"type": "log",
								"message": "\"Sending message (tag=\"&type&\", message=\"&message&\") to all\""
							}
						},
						{
							"id": "broadcast-message",
							"objectClass": "Multiplayer",
							"sid": 571466476739019,
							"parameters": {
								"from-id": "\"\"",
								"tag": "type",
								"message": "message",
								"mode": "reliable-unordered"
							}
						}
					],
					"sid": 549527107964929,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "GameDataJSON",
									"sid": 272104014989360,
									"parameters": {
										"path": "\"playerList\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "OnSendData",
									"sid": 737486749261839,
									"parameters": [
										"type",
										"message",
										"GameDataJSON.CurrentValue"
									]
								}
							],
							"sid": 896363615098788
						}
					]
				},
				{
					"functionName": "SendDataToSpecificPeer",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "type",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 860492452971452
						},
						{
							"name": "message",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 130033216527143
						},
						{
							"name": "to_alias",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 999697549347276
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 572846577603258,
							"parameters": {
								"type": "log",
								"message": "\"Sending message (tag=\"&type&\", message=\"&message&\") to all\""
							}
						},
						{
							"id": "send-message",
							"objectClass": "Multiplayer",
							"sid": 673339862913812,
							"parameters": {
								"peer-id": "GameDataJSON.Get(\"players.\"&to_alias&\".ID\")",
								"tag": "type",
								"message": "message",
								"mode": "reliable-ordered"
							}
						},
						{
							"callFunction": "OnSendData",
							"sid": 258370799065998,
							"parameters": [
								"type",
								"message",
								"to_alias"
							]
						}
					],
					"sid": 285587720840031
				},
				{
					"functionName": "SendDataToPeersWithRole",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "type",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 430763193669914
						},
						{
							"name": "message",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 876071104144160
						},
						{
							"name": "to_role",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 203792595965520
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 970013512129223,
							"parameters": {
								"type": "log",
								"message": "\"Sending message (tag=\"&type&\", message=\"&message&\") to role \"&to_role"
							}
						}
					],
					"sid": 521876779756331,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "GameDataJSON",
									"sid": 862084531905159,
									"parameters": {
										"path": "\"roles.\"&to_role"
									}
								}
							],
							"actions": [
								{
									"id": "send-message",
									"objectClass": "Multiplayer",
									"sid": 320618417842505,
									"parameters": {
										"peer-id": "GameDataJSON.Get(\"players.\"&GameDataJSON.CurrentValue&\".ID\")",
										"tag": "type",
										"message": "message",
										"mode": "reliable-unordered"
									}
								},
								{
									"callFunction": "OnSendData",
									"sid": 720409010678057,
									"parameters": [
										"type",
										"message",
										"GameDataJSON.Get(\"players.\"&GameDataJSON.CurrentValue&\".ID\")"
									]
								}
							],
							"sid": 235422949055194
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-parse-error",
							"objectClass": "MessagingJSON",
							"sid": 371682860674211
						}
					],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 201844435562577,
							"parameters": {
								"type": "log",
								"message": "\"Parse Error!\""
							}
						}
					],
					"sid": 755212613103102
				},
				{
					"functionName": "SetAndSendPlayerRole",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "to_alias",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 101460635645339
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 530800512451602,
							"parameters": {
								"type": "log",
								"message": "\"Setting role for player \"&to_alias&\". len(A)=\"&GameDataJSON.ArraySize(\"roles.A\")&\", len(B)=\"&GameDataJSON.ArraySize(\"roles.B\")"
							}
						}
					],
					"sid": 373408402602741,
					"children": [
						{
							"eventType": "variable",
							"name": "role",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 464559613744816
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 705337807487901,
									"parameters": {
										"first-value": "GameDataJSON.ArraySize(\"roles.A\")",
										"comparison": 3,
										"second-value": "GameDataJSON.ArraySize(\"roles.B\")"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 665892873483801,
									"parameters": {
										"variable": "role",
										"value": "\"A\""
									}
								}
							],
							"sid": 263686095250065
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 882976042599892
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 987251598285527,
									"parameters": {
										"variable": "role",
										"value": "\"B\""
									}
								}
							],
							"sid": 293370746938920
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-key",
									"objectClass": "GameDataJSON",
									"sid": 409834409669196,
									"parameters": {
										"path": "\"roles.\"&role"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-array",
									"objectClass": "GameDataJSON",
									"sid": 866878926484242,
									"parameters": {
										"path": "\"roles.\"&role",
										"size": "0"
									}
								}
							],
							"sid": 319175578029543
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "push-value",
									"objectClass": "GameDataJSON",
									"sid": 918675169289847,
									"parameters": {
										"where": "back",
										"path": "\"roles.\"&role",
										"value": "Multiplayer.PeerAlias"
									}
								},
								{
									"callFunction": "SendDataToSpecificPeer",
									"sid": 895130874430311,
									"parameters": [
										"\"__player_data\"",
										"\"{\"\"roles\"\": [\"\"\"&role&\"\"\"]}\"",
										"to_alias"
									]
								}
							],
							"sid": 330311880773369
						}
					]
				},
				{
					"functionName": "OnReceiveData",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "type",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 298940613912080
						},
						{
							"name": "message",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 887522670275400
						},
						{
							"name": "from_alias",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 229995508683411
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 386400078040671,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 235824167193187,
									"parameters": {
										"first-value": "type",
										"comparison": 0,
										"second-value": "\"__connection_data\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Parses connection data message.\nNOTE: Status assumed to be string (due to \"SetValue\" instead of \"SetJSON\")."
								},
								{
									"id": "parse",
									"objectClass": "MessagingJSON",
									"sid": 260732791484040,
									"parameters": {
										"data": "Multiplayer.Message"
									}
								}
							],
							"sid": 544865467378920,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-key",
											"objectClass": "MessagingJSON",
											"sid": 200900977140817,
											"parameters": {
												"path": "\"status\""
											}
										}
									],
									"actions": [
										{
											"id": "set-value",
											"objectClass": "GameDataJSON",
											"sid": 779979636877838,
											"parameters": {
												"path": "\"players.\"&Multiplayer.PeerAlias&\".status\"",
												"value": "MessagingJSON.Get(\"status\")"
											}
										}
									],
									"sid": 629300047261339
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "MessagingJSON",
											"sid": 641012571153664,
											"parameters": {
												"path": "\"roles\""
											}
										}
									],
									"actions": [],
									"sid": 463554141158917,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "has-key",
													"objectClass": "MessagingJSON",
													"sid": 365513304667133,
													"parameters": {
														"path": "\"roles.\"&MessagingJSON.CurrentValue"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-array",
													"objectClass": "GameDataJSON",
													"sid": 954078670119420,
													"parameters": {
														"path": "\"roles.\"&MessagingJSON.CurrentValue",
														"size": "0"
													}
												}
											],
											"sid": 103064579933524
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "push-value",
													"objectClass": "GameDataJSON",
													"sid": 432988616436902,
													"parameters": {
														"where": "back",
														"path": "\"roles.\"&MessagingJSON.CurrentValue",
														"value": "Multiplayer.PeerAlias"
													}
												}
											],
											"sid": 796225517617076
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 279274156468627
								}
							],
							"actions": [],
							"sid": 102496910461568,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-key",
											"objectClass": "GameDataJSON",
											"sid": 341153907561721,
											"parameters": {
												"path": "\"receivedData.\"&type"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-object",
											"objectClass": "GameDataJSON",
											"sid": 171806926044067,
											"parameters": {
												"path": "\"receivedData.\"&type"
											}
										}
									],
									"sid": 346715178836154
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-object",
											"objectClass": "GameDataJSON",
											"sid": 275374825719294,
											"parameters": {
												"path": "\"receivedData.\"&type&\".\"&from_alias"
											}
										},
										{
											"id": "set-value",
											"objectClass": "GameDataJSON",
											"sid": 141017739471272,
											"parameters": {
												"path": "\"receivedData.\"&type&\".\"&from_alias",
												"value": "message"
											}
										}
									],
									"sid": 912377039123261
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 326054032668801,
									"parameters": {
										"type": "log",
										"message": "\"Trying ORDFunctions for layout \"&LayoutName&\" and parameters \"&type&\", \"&message&\", \"&from_alias"
									}
								},
								{
									"id": "call-mapped-function",
									"objectClass": "Functions",
									"sid": 393185641315349,
									"parameters": {
										"name": "\"OnReceiveDataFunctions\"",
										"string": "LayoutName",
										"forward-params": "0"
									}
								}
							],
							"sid": 926640096144723
						}
					]
				}
			],
			"sid": 999130680075990
		},
		{
			"functionName": "OnReceiveRequest",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "type",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 446687601523543
				},
				{
					"name": "from_alias",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 163516695289068
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 726062506738697,
			"children": [
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Treat as public, send to request list"
						},
						{
							"id": "push-value",
							"objectClass": "GameDataJSON",
							"sid": 252573513693171,
							"parameters": {
								"where": "back",
								"path": "\"receivedRequests\"",
								"value": "str(\"{\"\"type\"\":\"\"\"&type&\"\"\",\"\"from_alias\"\":\"\"\"&from_alias&\"\"\"}\")"
							}
						}
					],
					"sid": 277602145499798
				}
			]
		},
		{
			"functionName": "closeRequest",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "pop-value",
					"objectClass": "GameDataJSON",
					"sid": 929399124464638,
					"parameters": {
						"where": "front",
						"path": "\"receivedRequests\""
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 762853173602743,
					"parameters": {
						"variable": "REQUEST_TAG",
						"value": "\"\""
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 170294560850916,
					"parameters": {
						"variable": "REQUEST_FROM_ALIAS",
						"value": "\"\""
					}
				},
				{
					"callFunction": "refreshRequestVariables",
					"sid": 145079795687313
				}
			],
			"sid": 929804148507459
		},
		{
			"functionName": "refreshRequestVariables",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 229281801311022,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "has-key",
							"objectClass": "GameDataJSON",
							"sid": 671396912857337,
							"parameters": {
								"path": "\"receivedRequests.0\""
							}
						}
					],
					"actions": [
						{
							"id": "parse",
							"objectClass": "RequestDataParser",
							"sid": 489394150481498,
							"parameters": {
								"data": "GameDataJSON.Get(\"receivedRequests.0\")"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 372168974357837,
							"parameters": {
								"type": "log",
								"message": "\"Setting variables for received request: \"&RequestDataParser.ToCompactString&\", tag (\"&RequestDataParser.Type(\"type\")&\"): \"&RequestDataParser.Get(\"type\")&\", from_alias (\"&RequestDataParser.Type(\"from_alias\")&\"): \"&RequestDataParser.Get(\"from_alias\")"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 957761882391162,
							"parameters": {
								"variable": "REQUEST_TAG",
								"value": "RequestDataParser.Get(\"type\")"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 533297882722425,
							"parameters": {
								"variable": "REQUEST_FROM_ALIAS",
								"value": "RequestDataParser.Get(\"from_alias\")"
							}
						}
					],
					"sid": 212096517214710
				}
			]
		},
		{
			"functionName": "OnSendData",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "type",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 826466257189768
				},
				{
					"name": "message",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 885631040251429
				},
				{
					"name": "to_alias",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 938615031071760
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 659088074959883,
			"children": [
				{
					"eventType": "block",
					"conditions": [],
					"actions": [],
					"sid": 894607875351916
				}
			]
		},
		{
			"functionName": "OnSendRequest",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "type",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 896225745934224
				},
				{
					"name": "to_alias",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 773640493547465
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 619262751487868,
			"children": [
				{
					"eventType": "block",
					"conditions": [],
					"actions": [],
					"sid": 724624857481784
				}
			]
		},
		{
			"functionName": "ApplyFunctionToAllReceivedData",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "tag",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 577850807116037
				},
				{
					"name": "function_name",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 766499734841490
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "log",
					"objectClass": "Browser",
					"sid": 350662206624677,
					"parameters": {
						"type": "log",
						"message": "\"Attempting to call function \"&function_name&\" with message_type=\"&tag"
					}
				},
				{
					"id": "log",
					"objectClass": "Browser",
					"sid": 344157355063198,
					"parameters": {
						"type": "log",
						"message": "GameDataJSON.GetAsCompactString(\"receivedData\")"
					}
				}
			],
			"sid": 721073179731043,
			"children": [
				{
					"eventType": "variable",
					"name": "temp_player_alias",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 941907402083009
				},
				{
					"eventType": "variable",
					"name": "temp_message",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 569616147502850
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "GameDataJSON",
							"sid": 246789044651082,
							"parameters": {
								"path": "\"receivedData.\"&tag"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 496995710973369,
							"parameters": {
								"variable": "temp_player_alias",
								"value": "GameDataJSON.CurrentKey"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 225692207251803,
							"parameters": {
								"variable": "temp_message",
								"value": "GameDataJSON.CurrentValue"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 724678147087804,
							"parameters": {
								"type": "log",
								"message": "\"InsideApplyFunction, player_alias: \"&temp_player_alias&\", message: \"&temp_message"
							}
						},
						{
							"type": "script",
							"script": "runtime.callFunction(localVars.function_name, localVars.temp_player_alias, localVars.temp_message)"
						}
					],
					"sid": 126304522899736
				}
			]
		},
		{
			"functionName": "ORD_default",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "type",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 265201349872488
				},
				{
					"name": "message",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 750755008852633
				},
				{
					"name": "from_alias",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 399182984645232
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "log",
					"objectClass": "Browser",
					"sid": 840351272507656,
					"parameters": {
						"type": "log",
						"message": "\"Calling empty default OnReceiveData function\""
					}
				}
			],
			"sid": 417648981106215
		},
		{
			"functionName": "ORR_default",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "type",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 381169566536486
				},
				{
					"name": "from_alias",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 334605566855023
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "log",
					"objectClass": "Browser",
					"sid": 744494389972081,
					"parameters": {
						"type": "log",
						"message": "\"Calling empty default OnReceiveRequest function\""
					}
				}
			],
			"sid": 214750058335260
		}
	],
	"sid": 451565257117563
}